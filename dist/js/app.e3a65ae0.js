(function(){"use strict";var e={1527:function(e,n,t){var a=t(5130),i=t(6768),o=(t(4114),t(4232)),l=t(144);async function r(e){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},t=await fetch("/api",n),a=await t.json();return a}function c(e){let n=e.length;while(0!=n){const t=Math.floor(Math.random()*n);n--,[e[n],e[t]]=[e[t],e[n]]}return e}const s=e=>((0,i.Qi)("data-v-0d87d0d3"),e=e(),(0,i.jt)(),e),u=["id"],v={class:"puzzle-hole-container"},d=s((()=>(0,i.Lk)("div",{class:"puzzle-hole-shadow-hider"},null,-1))),p=[d],h={class:"meaning",lang:"en"};var g=(0,i.pM)({__name:"KanjiMeaning",props:{meaning:String,attachedCharacter:String},setup(e){const n=e,t=(0,i.EW)((()=>{const e=["puzzle-hole"];return n.attachedCharacter&&e.push("no-shadow"),e.join(" ")})),a=(0,i.EW)((()=>n.attachedCharacter?"attached":""));function l(e){e.dataTransfer.setData("text",JSON.stringify({meaning:n.meaning,attachedCharacter:n.attachedCharacter}))}return(n,r)=>((0,i.uX)(),(0,i.CE)("div",{id:`meaning-node-${e.meaning}`,class:(0,o.C4)(["container",a.value])},[(0,i.Lk)("div",{draggable:"true",onDragstart:l},[(0,i.Lk)("div",v,[(0,i.Lk)("div",{class:(0,o.C4)(t.value)},p,2)]),(0,i.Lk)("div",h,[(0,i.Lk)("span",null,(0,o.v_)(e.meaning),1)])],32)],10,u))}}),k=t(1241);const f=(0,k.A)(g,[["__scopeId","data-v-0d87d0d3"]]);var m=f;const L={class:"puzzle-hole-container"};var b=(0,i.pM)({__name:"KanjiCharacter",props:{character:{},incorrect:{type:[Boolean,null]}},setup(e){const n=e,t=(0,i.EW)((()=>n.incorrect?"incorrect":""));return(e,n)=>((0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",{class:(0,o.C4)(["character",t.value])},[(0,i.Lk)("span",null,(0,o.v_)(e.character),1)],2),(0,i.Lk)("div",L,[(0,i.Lk)("div",{class:(0,o.C4)(["puzzle-hole-corner left-corner",t.value])},null,2),(0,i.Lk)("div",{class:(0,o.C4)(["puzzle-hole",t.value])},null,2),(0,i.Lk)("div",{class:(0,o.C4)(["puzzle-hole-corner right-corner",t.value])},null,2)])]))}});const w=(0,k.A)(b,[["__scopeId","data-v-6996a282"]]);var C=w;const y={class:"meaning-drop-zone"};var j=(0,i.pM)({__name:"KanjiContainer",props:{kanji:{},attachedMeaning:{},incorrect:{type:[Boolean,null]}},emits:["dropmeaning"],setup(e,{emit:n}){const t=e,o=n;function l(e){if(!e.dataTransfer)throw new Error("Missing dataTransfer on drop event");const{meaning:n,attachedCharacter:a}=JSON.parse(e.dataTransfer.getData("text"));o("dropmeaning",{goingToCharacter:t.kanji,comingFromCharacter:a,oldMeaning:t.attachedMeaning,newMeaning:n})}return(e,n)=>((0,i.uX)(),(0,i.CE)("div",{class:"kanji",onDrop:(0,a.D$)(l,["prevent","stop"]),onDragover:n[0]||(n[0]=(0,a.D$)((()=>{}),["prevent"]))},[(0,i.bF)(C,{character:e.kanji,incorrect:e.incorrect},null,8,["character","incorrect"]),(0,i.Lk)("div",y,[e.attachedMeaning?((0,i.uX)(),(0,i.Wv)(m,{key:0,meaning:e.attachedMeaning,attachedCharacter:e.kanji},null,8,["meaning","attachedCharacter"])):(0,i.Q3)("",!0)])],32))}});const _=(0,k.A)(j,[["__scopeId","data-v-83ea7480"]]);var M=_;const E=e=>((0,i.Qi)("data-v-76ab28b4"),e=e(),(0,i.jt)(),e),z={key:0,class:"top-left",height:"20",width:"20"},K=E((()=>(0,i.Lk)("path",{d:"m20,0 h-20 v20 a20,20 0 0 1 20,-20 z"},null,-1))),R=[K],x={key:1,class:"top-right",height:"20",width:"20"},T=E((()=>(0,i.Lk)("path",{d:"m20,20 v-20 h-20 a20,20 0 0 1 20,20 z"},null,-1))),O=[T],X={key:2,class:"bottom-right",height:"20",width:"20"},B=E((()=>(0,i.Lk)("path",{d:"m0,20 h20 v-20 a20,20 0 0 1 -20,20 z"},null,-1))),D=[B],S={key:3,class:"bottom-left",height:"20",width:"20"},A=E((()=>(0,i.Lk)("path",{d:"m0,0 v20 h20 a20,20 0 0 1 -20,-20z"},null,-1))),F=[A];var I=(0,i.pM)({__name:"RoundedCorners",props:{hideTopLeft:{type:Boolean,default:!1},hideTopRight:{type:Boolean,default:!1},hideBottomRight:{type:Boolean,default:!1},hideBottomLeft:{type:Boolean,default:!1}},setup(e){return(n,t)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[e.hideTopLeft?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("svg",z,R)),e.hideTopRight?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("svg",x,O)),e.hideBottomRight?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("svg",X,D)),e.hideBottomLeft?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("svg",S,F))],64))}});const N=(0,k.A)(I,[["__scopeId","data-v-76ab28b4"]]);var U=N;const $=e=>((0,i.Qi)("data-v-2cea69cb"),e=e(),(0,i.jt)(),e),Q={class:"settings-panel-container"},V={class:"settings-panel"},W=$((()=>(0,i.Lk)("div",{class:"panel-title"}," 設定 ",-1))),J={class:"option-container"},G=$((()=>(0,i.Lk)("div",{class:"option-title"}," Batch Size ",-1))),H={class:"option-content"},P={class:"batch-size"},Z=$((()=>(0,i.Lk)("div",null,"Size",-1))),q={class:"option-container"},Y=$((()=>(0,i.Lk)("div",{class:"option-title"}," Grouping ",-1))),ee={class:"option-content"},ne={class:"group-kanji"},te=$((()=>(0,i.Lk)("div",{class:"level-limit-option-title"},"Group Similar Kanji",-1))),ae={class:"option-container"},ie=$((()=>(0,i.Lk)("div",{class:"option-title"}," Answer Checking ",-1))),oe={class:"option-content"},le={class:"group-kanji"},re=$((()=>(0,i.Lk)("div",{class:"level-limit-option-title"},"Auto-Check",-1))),ce={class:"group-kanji"},se=$((()=>(0,i.Lk)("div",{class:"level-limit-option-title"},"Auto-Continue",-1))),ue={class:"option-container"},ve=$((()=>(0,i.Lk)("div",{class:"option-title"},"Level Limits",-1))),de={class:"option-content"},pe={class:"level-limit"},he=["disabled"],ge={class:"level-limit"},ke=$((()=>(0,i.Lk)("div",{class:"level-limit-option-title"},"Lower Limit",-1))),fe={class:"level-limit"},me=$((()=>(0,i.Lk)("div",{class:"level-limit-option-title"},"Use WaniKani Level",-1))),Le=(0,i.Fv)('<div class="option-container" data-v-2cea69cb><div class="option-title" data-v-2cea69cb> WaniKani </div><div class="option-content" data-v-2cea69cb><div class="wanikani" data-v-2cea69cb><div data-v-2cea69cb>API Key</div><input type="password" placeholder="API Key Goes Here" data-v-2cea69cb></div></div></div>',1);var be=(0,i.pM)({__name:"SettingsPanel",emits:["settingsUpdated"],setup(e,{emit:n}){const t=(0,l.KR)(3),r=(0,l.KR)(!0),c=(0,l.KR)(!0),s=(0,l.KR)(!0),u=(0,l.KR)(!1),v=(0,i.EW)((()=>u.value?"disabled":"")),d=(0,l.KR)(60),p=(0,l.KR)(1),h=n;function g(e){if("upper"==e)d.value>60?d.value=60:d.value<1&&(d.value=1);else if("lower"==e)p.value>60?p.value=60:p.value<1&&(p.value=1);else{if("batch"!=e)throw new Error(`Running checkLimits('${e}'), but no case for ${e}`);t.value>20?t.value=20:t.value<1&&(t.value=1)}}function k(){h("settingsUpdated",{batchSize:t.value,groupKanji:r.value,autoCheck:c.value,levelLimit:{upper:d.value,lower:p.value}})}return(e,n)=>((0,i.uX)(),(0,i.CE)("section",null,[(0,i.Lk)("div",Q,[(0,i.Lk)("div",V,[W,(0,i.Lk)("div",J,[G,(0,i.Lk)("div",H,[(0,i.Lk)("div",P,[Z,(0,i.bo)((0,i.Lk)("input",{type:"number",onBlur:n[0]||(n[0]=e=>g("batch")),"onUpdate:modelValue":n[1]||(n[1]=e=>t.value=e)},null,544),[[a.Jo,t.value]])])])]),(0,i.Lk)("div",q,[Y,(0,i.Lk)("div",ee,[(0,i.Lk)("div",ne,[te,(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>r.value=e)},null,512),[[a.lH,r.value]])])])]),(0,i.Lk)("div",ae,[ie,(0,i.Lk)("div",oe,[(0,i.Lk)("div",le,[re,(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>c.value=e)},null,512),[[a.lH,c.value]])]),(0,i.Lk)("div",ce,[se,(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=e=>s.value=e)},null,512),[[a.lH,s.value]])])])]),(0,i.Lk)("div",ue,[ve,(0,i.Lk)("div",de,[(0,i.Lk)("div",pe,[(0,i.Lk)("div",{class:(0,o.C4)(["level-limit-option-title",v.value])},"Upper Limit",2),(0,i.bo)((0,i.Lk)("input",{type:"number",onBlur:n[5]||(n[5]=e=>g("upper")),"onUpdate:modelValue":n[6]||(n[6]=e=>d.value=e),disabled:u.value},null,40,he),[[a.Jo,d.value]])]),(0,i.Lk)("div",ge,[ke,(0,i.bo)((0,i.Lk)("input",{type:"number",onBlur:n[7]||(n[7]=e=>g("lower")),"onUpdate:modelValue":n[8]||(n[8]=e=>p.value=e)},null,544),[[a.Jo,p.value]])]),(0,i.Lk)("div",fe,[me,(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[9]||(n[9]=e=>u.value=e)},null,512),[[a.lH,u.value]])])])]),Le,(0,i.Lk)("div",{class:"save-button-container"},[(0,i.Lk)("button",{class:"save-button",onClick:k}," Save ")])])])]))}});const we=(0,k.A)(be,[["__scopeId","data-v-2cea69cb"]]);var Ce=we;const ye=e=>((0,i.Qi)("data-v-16684df0"),e=e(),(0,i.jt)(),e),je={id:"nice-job-text"},_e=ye((()=>(0,i.Lk)("div",{class:"app-name"},[(0,i.Lk)("div",null,"似"),(0,i.Lk)("div",null,"て"),(0,i.Lk)("div",null,"ね"),(0,i.Lk)("div",null,"ー"),(0,i.Lk)("div",null,"！")],-1))),Me={class:"settings-button-container"},Ee={height:"35px",id:"Layer_1",style:{"enable-background":"new 0 0 512 512"},version:"1.1",viewBox:"0 0 512 512",width:"35px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ze=ye((()=>(0,i.Lk)("path",{d:"M424.5,216.5h-15.2c-12.4,0-22.8-10.7-22.8-23.4c0-6.4,2.7-12.2,7.5-16.5l9.8-9.6c9.7-9.6,9.7-25.3,0-34.9l-22.3-22.1  c-4.4-4.4-10.9-7-17.5-7c-6.6,0-13,2.6-17.5,7l-9.4,9.4c-4.5,5-10.5,7.7-17,7.7c-12.8,0-23.5-10.4-23.5-22.7V89.1  c0-13.5-10.9-25.1-24.5-25.1h-30.4c-13.6,0-24.4,11.5-24.4,25.1v15.2c0,12.3-10.7,22.7-23.5,22.7c-6.4,0-12.3-2.7-16.6-7.4l-9.7-9.6  c-4.4-4.5-10.9-7-17.5-7s-13,2.6-17.5,7L110,132c-9.6,9.6-9.6,25.3,0,34.8l9.4,9.4c5,4.5,7.8,10.5,7.8,16.9  c0,12.8-10.4,23.4-22.8,23.4H89.2c-13.7,0-25.2,10.7-25.2,24.3V256v15.2c0,13.5,11.5,24.3,25.2,24.3h15.2  c12.4,0,22.8,10.7,22.8,23.4c0,6.4-2.8,12.4-7.8,16.9l-9.4,9.3c-9.6,9.6-9.6,25.3,0,34.8l22.3,22.2c4.4,4.5,10.9,7,17.5,7  c6.6,0,13-2.6,17.5-7l9.7-9.6c4.2-4.7,10.2-7.4,16.6-7.4c12.8,0,23.5,10.4,23.5,22.7v15.2c0,13.5,10.8,25.1,24.5,25.1h30.4  c13.6,0,24.4-11.5,24.4-25.1v-15.2c0-12.3,10.7-22.7,23.5-22.7c6.4,0,12.4,2.8,17,7.7l9.4,9.4c4.5,4.4,10.9,7,17.5,7  c6.6,0,13-2.6,17.5-7l22.3-22.2c9.6-9.6,9.6-25.3,0-34.9l-9.8-9.6c-4.8-4.3-7.5-10.2-7.5-16.5c0-12.8,10.4-23.4,22.8-23.4h15.2  c13.6,0,23.3-10.7,23.3-24.3V256v-15.2C447.8,227.2,438.1,216.5,424.5,216.5z M336.8,256L336.8,256c0,44.1-35.7,80-80,80  c-44.3,0-80-35.9-80-80l0,0l0,0c0-44.1,35.7-80,80-80C301.1,176,336.8,211.9,336.8,256L336.8,256z"},null,-1))),Ke=[ze],Re={class:"button-container"},xe={class:"kanji-meaning-items-container"},Te={key:0},Oe={key:0,class:"kanji-characters"};var Xe=(0,i.pM)({__name:"AppStage",setup(e){let n=(0,l.KR)(60),t=(0,l.KR)(1),s=(0,l.KR)(3),u=(0,l.KR)(!0),v=(0,l.KR)(!0);const d=(0,l.KR)(null),p=(0,l.KR)(""),h=(0,l.KR)(""),g=(0,l.KR)(!0),k=(0,i.EW)((()=>g.value?"showSettings":"")),f=(0,l.Kh)({meanings:[],characters:[]});function L(e){if(!e.dataTransfer)throw new Error("Trying to drop but no dataTransfer object exists on event");const{meaning:n,attachedCharacter:t}=JSON.parse(e.dataTransfer.getData("text"));y({goingToCharacter:"MEANINGZONE",comingFromCharacter:t,oldMeaning:"MEANINGZONE",newMeaning:n})}function b(){let e=!0;f.characters.forEach((n=>{let t=n.correctMeaning==n.attachedMeaning;t||(e=!1),n.incorrect=!t})),e&&E("ナイス！","Retrieving next kanji set...")}function w(e,n){if(!e||!n)throw new Error("You must enter popup text");if(!d.value)throw new Error("popover ref is null");p.value=e,h.value=n,d.value.style.pointerEvents="initial",d.value.style.opacity="1"}function C(){if(!d.value)throw new Error("popover ref is null");d.value.style.pointerEvents="none",d.value.style.opacity="0"}function y(e){const{goingToCharacter:n,comingFromCharacter:t,oldMeaning:a,newMeaning:i}=e;if("MEANINGZONE"===n){if(f.meanings.find((e=>e==i)))return;let e=f.characters.find((e=>e.kanji==t));if(!e)throw new Error(`Meaning coming from ${t} but unable to find it in list.`);return e.attachedMeaning="",void f.meanings.push(i)}if(t&&a){let e=f.characters.find((e=>e.kanji==t));if(!e)throw new Error(`Meaning coming from ${t} but unable to find it in list.`);e.attachedMeaning=a}else if(!t&&a)f.meanings.push(a);else if(t&&!a){let e=f.characters.find((e=>e.kanji==t));if(!e)throw new Error(`Meaning coming from ${t} but unable to find it in list.`);e.attachedMeaning=""}f.meanings=f.meanings.filter((e=>e!=i));let o=f.characters.find((e=>e.kanji==n));if(!o)throw new Error(`Unable to find ${n} in modelData.characters while trying to set attachedMeaning to newMeaning`);o.attachedMeaning=i,f.meanings.length<=0&&v.value&&b()}function j(){g.value=!g.value}function _(e){s.value=e.batchSize,u.value=e.groupKanji,v.value=e.autoCheck,n.value=e.levelLimit.upper,t.value=e.levelLimit.lower,j(),E("設定を保存しました！","Retrieving kanji list...")}function E(e,a){w(e,a),setTimeout((()=>{let e={type:"KanjiBatchRequest",data:{user_id:"star",group_count:s.value,max_level:n.value,min_level:t.value,min_group_size:2}},a=r(e);a.then((e=>{z(e),setTimeout(C,500)}))}),500)}function z(e){let n=[],t=[];for(const a of Object.values(e))n.push(a.meaning),t.push({kanji:a.character,correctMeaning:a.meaning,attachedMeaning:"",incorrect:null});f.meanings=c(n),f.characters=c(t)}return(e,n)=>((0,i.uX)(),(0,i.CE)("div",{id:"stage",class:(0,o.C4)(k.value)},[(0,i.Lk)("div",{id:"nice-job-popover",ref_key:"popover",ref:d},[(0,i.Lk)("div",je,[(0,i.Lk)("div",null,(0,o.v_)(p.value),1),(0,i.Lk)("div",null,(0,o.v_)(h.value),1)])],512),(0,i.Lk)("nav",null,[_e,(0,i.Lk)("div",Me,[(0,i.Lk)("button",{class:"settings-button",onClick:(0,a.D$)(j,["prevent"])},[((0,i.uX)(),(0,i.CE)("svg",Ee,Ke))])])]),(0,i.Lk)("section",{class:"kanji-meanings",onDragover:n[0]||(n[0]=(0,a.D$)((()=>{}),["prevent"])),onDrop:L},[(0,i.Lk)("div",Re,[(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"submit-button",onClick:(0,a.D$)(b,["prevent"])}," Check ")])]),(0,i.Lk)("div",xe,[(0,i.bF)(U,{hideBottomRight:!0,hideTopRight:!0}),f.meanings.length>0?((0,i.uX)(),(0,i.CE)("div",Te,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(f.meanings,(e=>((0,i.uX)(),(0,i.Wv)(m,{key:e,meaning:e,attachedCharacter:""},null,8,["meaning"])))),128))])):(0,i.Q3)("",!0)])],32),(0,i.Lk)("section",{class:"kanji-characters-container",onDragover:n[1]||(n[1]=(0,a.D$)((()=>{}),["prevent"])),onDrop:L},[(0,i.bF)(U,{hideBottomLeft:!0}),f.characters.length>0?((0,i.uX)(),(0,i.CE)("div",Oe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(f.characters,(e=>((0,i.uX)(),(0,i.Wv)(M,{key:e.kanji,kanji:e.kanji,attachedMeaning:e.attachedMeaning,incorrect:e.incorrect,onDropmeaning:y},null,8,["kanji","attachedMeaning","incorrect"])))),128))])):(0,i.Q3)("",!0)],32),(0,i.bF)(Ce,{onSettingsUpdated:_})],2))}});const Be=(0,k.A)(Xe,[["__scopeId","data-v-16684df0"]]);var De=Be,Se=(0,i.pM)({__name:"App",setup(e){return(e,n)=>((0,i.uX)(),(0,i.CE)("main",null,[(0,i.bF)(De)]))}});const Ae=Se;var Fe=Ae;(0,a.Ef)(Fe).mount("#app")}},n={};function t(a){var i=n[a];if(void 0!==i)return i.exports;var o=n[a]={exports:{}};return e[a].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(n,a,i,o){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],o=e[u][2];for(var r=!0,c=0;c<a.length;c++)(!1&o||l>=o)&&Object.keys(t.O).every((function(e){return t.O[e](a[c])}))?a.splice(c--,1):(r=!1,o<l&&(l=o));if(r){e.splice(u--,1);var s=i();void 0!==s&&(n=s)}}return n}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,a){var i,o,l=a[0],r=a[1],c=a[2],s=0;if(l.some((function(n){return 0!==e[n]}))){for(i in r)t.o(r,i)&&(t.m[i]=r[i]);if(c)var u=c(t)}for(n&&n(a);s<l.length;s++)o=l[s],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(u)},a=self["webpackChunksimilar_kanji_puzzle"]=self["webpackChunksimilar_kanji_puzzle"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(1527)}));a=t.O(a)})();
//# sourceMappingURL=app.e3a65ae0.js.map