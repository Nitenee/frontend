(function(){"use strict";var e={8259:function(e,t,n){var a=n(5130),i=n(3367),o=n(6768),r=(n(4114),n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197),n(4232)),l=n(144);const c=(0,i.nY)("kanji-settings",(()=>{const e=(0,l.KR)(3),t=(0,l.KR)(!0),n=(0,l.KR)(!0),a=(0,l.KR)(!0),i=(0,l.KR)(!1),o=(0,l.KR)(""),r=(0,l.KR)(60),c=(0,l.KR)(1);function s(t){e.value=t}function u(e){t.value=e}function d(e){n.value=e}function p(e){a.value=e}function v(e){i.value=e}function g(e){o.value=e}function h(e){r.value=e}function m(e){c.value=e}return{batchSize:e,groupKanji:t,autoCheck:n,autoContinue:a,useWanikaniLevel:i,wanikaniAPIKey:o,levelLimitUpper:r,levelLimitLower:c,setBatchSize:s,setGroupKanji:u,setAutoCheck:d,setAutoContinue:p,setUseWanikaniLevel:v,setWanikaniAPIKey:g,setLevelLimitUpper:h,setLevelLimitLower:m}})),s=(0,i.nY)("drag-and-drop",(()=>{const e=(0,l.KR)(!1),t=(0,l.KR)(null),n=(0,l.KR)(null),a=(0,l.KR)(void 0),i=(0,l.Kh)({x:0,y:0});function o(i){i.element.style.opacity="0.3",e.value=!0,t.value=i.element,n.value=i.meaning,a.value=i.draggingAttachedCharacter}function r(){t.value&&(t.value.style.opacity="1"),e.value=!1,t.value=null,n.value=null,a.value=void 0}function c(e){i.x=e.x,i.y=e.y}function s(){e.value?document.body.style.cursor="grabbing":document.body.style.cursor="default"}return{isDragging:e,draggingElement:t,draggingMeaning:n,draggingAttachedCharacter:a,setDragging:o,clearDragging:r,pointerPosition:i,setPointerPosition:c,checkCursor:s}})),u=(0,i.nY)("kanji-state",(()=>{const e=(0,l.Kh)({meanings:[],characters:[]}),t=(0,l.KR)(!1),n=(0,l.KR)(null),a=(0,l.KR)(null);function i(e){t.value=e}function o(t,n,a){a?(setTimeout((()=>e.characters=n),1e3),setTimeout((()=>e.meanings=t),1500)):(e.meanings=t,e.characters=n)}function r(t){e.meanings=t}function c(t){e.characters=t}function s(){e.meanings=[],e.characters=[]}function u(t){const{goingToCharacter:a,comingFromCharacter:i,oldMeaning:o,newMeaning:r}=t;if("MEANINGZONE"===a){if(e.meanings.find((e=>e==r)))return;const t=e.characters.find((e=>e.kanji==i));return t?(t.attachedMeaning="",void e.meanings.push(r)):void console.error(`Meaning coming from ${i} but unable to find it in list.`)}if(i&&o){const t=e.characters.find((e=>e.kanji==i));if(!t)return void console.error(`Meaning coming from ${i} but unable to find it in list.`);t.attachedMeaning=o}else if(!i&&o)e.meanings.push(o);else if(i&&!o){const t=e.characters.find((e=>e.kanji==i));if(!t)return void console.error(`Meaning coming from ${i} but unable to find it in list.`);t.attachedMeaning=""}e.meanings=e.meanings.filter((e=>e!=r));const l=e.characters.find((e=>e.kanji==a));if(!l)throw new Error(`Unable to find ${a} in modelData.characters while trying to set attachedMeaning to newMeaning`);if(l.attachedMeaning=r,!n.value)throw new Error("checkAnswers function is null in kanji-state store");n.value()}function d(e){n.value=e}function p(e){a.value=e}return{modelData:e,readyToGoToNextKanjiBatch:t,setModelData:o,setModelDataMeanings:r,setModelDataCharacters:c,clearModelData:s,setReadyToGoToNextKanjiBatch:i,setCheckAnswers:d,setAllCorrectWaveAnimation:p,processDrop:u}}));async function d(e){const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},n=await fetch("/api",t),a=await n.json();return a}function p(e){let t=e.length;while(0!=t){const n=Math.floor(Math.random()*t);t--,[e[t],e[n]]=[e[n],e[t]]}return e}async function v(e){const t=await fetch("https://api.wanikani.com/v2/user",{headers:{"Wanikani-Revision":"20170710",Authorization:`Bearer ${e}`}}),n=await t.json();return n}var g=n(4968);const h={height:"35px",id:"Layer_1",style:{"enable-background":"new 0 0 512 512"},version:"1.1",viewBox:"0 0 512 512",width:"35px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},m=(0,o.Lk)("path",{d:"M424.5,216.5h-15.2c-12.4,0-22.8-10.7-22.8-23.4c0-6.4,2.7-12.2,7.5-16.5l9.8-9.6c9.7-9.6,9.7-25.3,0-34.9l-22.3-22.1  c-4.4-4.4-10.9-7-17.5-7c-6.6,0-13,2.6-17.5,7l-9.4,9.4c-4.5,5-10.5,7.7-17,7.7c-12.8,0-23.5-10.4-23.5-22.7V89.1  c0-13.5-10.9-25.1-24.5-25.1h-30.4c-13.6,0-24.4,11.5-24.4,25.1v15.2c0,12.3-10.7,22.7-23.5,22.7c-6.4,0-12.3-2.7-16.6-7.4l-9.7-9.6  c-4.4-4.5-10.9-7-17.5-7s-13,2.6-17.5,7L110,132c-9.6,9.6-9.6,25.3,0,34.8l9.4,9.4c5,4.5,7.8,10.5,7.8,16.9  c0,12.8-10.4,23.4-22.8,23.4H89.2c-13.7,0-25.2,10.7-25.2,24.3V256v15.2c0,13.5,11.5,24.3,25.2,24.3h15.2  c12.4,0,22.8,10.7,22.8,23.4c0,6.4-2.8,12.4-7.8,16.9l-9.4,9.3c-9.6,9.6-9.6,25.3,0,34.8l22.3,22.2c4.4,4.5,10.9,7,17.5,7  c6.6,0,13-2.6,17.5-7l9.7-9.6c4.2-4.7,10.2-7.4,16.6-7.4c12.8,0,23.5,10.4,23.5,22.7v15.2c0,13.5,10.8,25.1,24.5,25.1h30.4  c13.6,0,24.4-11.5,24.4-25.1v-15.2c0-12.3,10.7-22.7,23.5-22.7c6.4,0,12.4,2.8,17,7.7l9.4,9.4c4.5,4.4,10.9,7,17.5,7  c6.6,0,13-2.6,17.5-7l22.3-22.2c9.6-9.6,9.6-25.3,0-34.9l-9.8-9.6c-4.8-4.3-7.5-10.2-7.5-16.5c0-12.8,10.4-23.4,22.8-23.4h15.2  c13.6,0,23.3-10.7,23.3-24.3V256v-15.2C447.8,227.2,438.1,216.5,424.5,216.5z M336.8,256L336.8,256c0,44.1-35.7,80-80,80  c-44.3,0-80-35.9-80-80l0,0l0,0c0-44.1,35.7-80,80-80C301.1,176,336.8,211.9,336.8,256L336.8,256z"},null,-1),f=[m];function k(e,t){return(0,o.uX)(),(0,o.CE)("svg",h,f)}var L=n(1241);const b={},w=(0,L.A)(b,[["render",k]]);var C=w;const y=e=>((0,o.Qi)("data-v-40ae5008"),e=e(),(0,o.jt)(),e),j=y((()=>(0,o.Lk)("div",{class:"app-name"},[(0,o.Lk)("div",null,"似"),(0,o.Lk)("div",null,"て"),(0,o.Lk)("div",null,"ね"),(0,o.Lk)("div",null,"ー"),(0,o.Lk)("div",null,"！")],-1))),E={class:"settings-button-container"};var _=(0,o.pM)({__name:"NavBar",emits:["togglesettings"],setup(e,{emit:t}){const n=t;return(e,t)=>((0,o.uX)(),(0,o.CE)("nav",null,[j,(0,o.Lk)("div",E,[(0,o.Lk)("button",{class:"settings-button",onClick:t[0]||(t[0]=(0,a.D$)((e=>n("togglesettings")),["prevent"]))},[(0,o.bF)(C)])])]))}});const S=(0,L.A)(_,[["__scopeId","data-v-40ae5008"]]);var K=S;const x={class:"popover-text"},M={class:"popover-subtext"};var R=(0,o.pM)({__name:"PopOver",props:{popoverText:{},popoverSubtext:{}},setup(e,{expose:t}){const n=(0,l.KR)(null);return t({popover:n}),(e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"popover",ref_key:"popover",ref:n},[(0,o.Lk)("div",null,[(0,o.Lk)("div",x,(0,r.v_)(e.popoverText),1),(0,o.Lk)("div",M,(0,r.v_)(e.popoverSubtext),1)])],512))}});const A=(0,L.A)(R,[["__scopeId","data-v-78c1d1b8"]]);var z=A;const T=e=>((0,o.Qi)("data-v-0810cec7"),e=e(),(0,o.jt)(),e),I={class:"puzzle-knob-container"},D={class:"puzzle-knob",height:"37",width:"100"},U=T((()=>(0,o.Lk)("path",{class:"puzzle-knob-stroker",d:"m 16 29 C 24 29 27 29 27 19 V 16 C 27 5 32 2 43 2 H 57 C 68 2 73 5 73 16 V 19 C 73 29 76 29 84 29 L 100 29 L 100 34 L 0 34 L 0 29 z"},null,-1))),X={key:0,class:"puzzle-knob-inner",d:"m 19 31 C 24 31 32 27 32 19 V 10 C 32 7 35 3 38 3 H 62 C 65 3 68 7 68 10 V 19 C 68 27 76 31 81 31 L 100 31 L 100 32 L 0 32 L 0 31 z"},B={key:1,class:"puzzle-knob-inner",d:"m 19 31 C 24 31 32 27 32 19 V 10 C 32 7 35 3 38 3 H 62 C 65 3 68 7 68 10 V 19 C 68 27 76 31 81 31 L 95 31 L 95 32 L 5 32 L 5 31 z"},P={class:"meaning",lang:"en"};var W=(0,o.pM)({__name:"KanjiMeaning",props:{meaning:String,attachedCharacter:String},setup(e){const t=(0,l.KR)(null),n=s(),i=e,c=((0,o.EW)((()=>{const e=["puzzle-hole"];return i.attachedCharacter&&e.push("no-shadow"),e.join(" ")})),(0,o.EW)((()=>i.attachedCharacter?"attached":"")));function u(e){if(!t.value)throw new Error("Clicked on meaning but ref is null");if(!i.meaning)throw new Error("Clicked on meaning but meaning prop is null");"mouse"===e.pointerType&&0!==e.button||n.setDragging({element:t.value,meaning:i.meaning,draggingAttachedCharacter:i.attachedCharacter})}return(n,i)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(["container",c.value]),ref_key:"containerElement",ref:t,onPointerdown:(0,a.D$)(u,["prevent","stop"])},[(0,o.Lk)("div",null,[(0,o.Lk)("div",I,[((0,o.uX)(),(0,o.CE)("svg",D,[U,e.attachedCharacter?((0,o.uX)(),(0,o.CE)("path",X)):((0,o.uX)(),(0,o.CE)("path",B))]))]),(0,o.Lk)("div",P,[(0,o.Lk)("span",null,(0,r.v_)(e.meaning),1)])])],34))}});const F=(0,L.A)(W,[["__scopeId","data-v-0810cec7"]]);var N=F,O=(0,o.pM)({__name:"DragIllusion",setup(e){const{isDragging:t,draggingMeaning:n,pointerPosition:a}=(0,i.bP)(s()),c=(0,o.EW)((()=>{if(!t.value)return"display: none;";const{x:e,y:n}=a.value;return`left: ${e-50}px; top: ${n-15}px;`}));return(e,t)=>((0,o.uX)(),(0,o.CE)("div",{style:(0,r.Tr)(c.value)},[(0,o.bF)(N,{meaning:(0,l.R1)(n),"attached-character":""},null,8,["meaning"])],4))}});const V=(0,L.A)(O,[["__scopeId","data-v-284e0313"]]);var G=V;const $=e=>((0,o.Qi)("data-v-76ab28b4"),e=e(),(0,o.jt)(),e),Q={key:0,class:"top-left",height:"20",width:"20"},H=$((()=>(0,o.Lk)("path",{d:"m20,0 h-20 v20 a20,20 0 0 1 20,-20 z"},null,-1))),Y=[H],J={key:1,class:"top-right",height:"20",width:"20"},q=$((()=>(0,o.Lk)("path",{d:"m20,20 v-20 h-20 a20,20 0 0 1 20,20 z"},null,-1))),Z=[q],ee={key:2,class:"bottom-right",height:"20",width:"20"},te=$((()=>(0,o.Lk)("path",{d:"m0,20 h20 v-20 a20,20 0 0 1 -20,20 z"},null,-1))),ne=[te],ae={key:3,class:"bottom-left",height:"20",width:"20"},ie=$((()=>(0,o.Lk)("path",{d:"m0,0 v20 h20 a20,20 0 0 1 -20,-20z"},null,-1))),oe=[ie];var re=(0,o.pM)({__name:"RoundedCorners",props:{hideTopLeft:{type:Boolean,default:!1},hideTopRight:{type:Boolean,default:!1},hideBottomRight:{type:Boolean,default:!1},hideBottomLeft:{type:Boolean,default:!1}},setup(e){return(t,n)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[e.hideTopLeft?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("svg",Q,Y)),e.hideTopRight?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("svg",J,Z)),e.hideBottomRight?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("svg",ee,ne)),e.hideBottomLeft?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("svg",ae,oe))],64))}});const le=(0,L.A)(re,[["__scopeId","data-v-76ab28b4"]]);var ce=le;const se={class:"kanji-meanings"},ue={class:"curve"},de={class:"button-container"},pe={key:0},ve={key:1},ge={class:"kanji-meaning-items-container"};var he=(0,o.pM)({__name:"KanjiMeaningsSection",emits:["onSubmit"],setup(e,{emit:t}){const n=u(),i=(0,o.EW)((()=>n.readyToGoToNextKanjiBatch?"continue":""));function c(e,t){g.Ay.fromTo(e,{opacity:0,transform:"translateX(-50px) scale(0.5)"},{opacity:1,transform:"translateX(0) scale(1)",ease:"elastic.out",delay:.1*Number(e.dataset.index),onComplete:()=>{e.setAttribute("style",""),t()}})}const s=t;return(e,t)=>((0,o.uX)(),(0,o.CE)("section",se,[(0,o.Lk)("div",ue,[(0,o.Lk)("div",de,[(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:(0,r.C4)(["submit-button",i.value]),onClick:t[0]||(t[0]=(0,a.D$)((e=>s("onSubmit")),["prevent"]))},[(0,o.bF)(a.eB,{name:"check-button",mode:"out-in"},{default:(0,o.k6)((()=>[(0,l.R1)(n).readyToGoToNextKanjiBatch?((0,o.uX)(),(0,o.CE)("span",pe,"Continue")):((0,o.uX)(),(0,o.CE)("span",ve,"Check"))])),_:1})],2)])])]),(0,o.Lk)("div",ge,[(0,o.Lk)("div",null,[(0,o.bF)(ce,{hideBottomRight:!0,hideTopRight:!0}),(0,o.bF)(a.F,{tag:"div",name:"meaning",onEnter:c},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,l.R1)(n).modelData.meanings,((e,t)=>((0,o.uX)(),(0,o.Wv)(N,{key:e,"data-index":t,meaning:e,attachedCharacter:""},null,8,["data-index","meaning"])))),128))])),_:1})])])]))}});const me=(0,L.A)(he,[["__scopeId","data-v-1a0ae263"]]);var fe=me;const ke=e=>((0,o.Qi)("data-v-297a330c"),e=e(),(0,o.jt)(),e),Le={class:"puzzle-hole-container"},be=ke((()=>(0,o.Lk)("path",{d:"m 20 32 C 25 32 30 27 30 22 V 14 C 30 7 35 4 40 4 H 60 C 65 4 70 9 70 14 V 22 C 70 27 75 32 80 32 L 100 32 L 100 0 L 0 0 L 0 32 z"},null,-1))),we=[be];var Ce=(0,o.pM)({__name:"KanjiCharacter",props:{character:{},incorrect:{type:[Boolean,null]}},setup(e){const t=e,n=(0,o.EW)((()=>t.incorrect?"incorrect":""));return(e,t)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["character",n.value])},[(0,o.Lk)("span",null,(0,r.v_)(e.character),1)],2),(0,o.Lk)("div",Le,[((0,o.uX)(),(0,o.CE)("svg",{class:(0,r.C4)(["puzzle-hole",n.value]),height:"32",width:"100"},we,2))])]))}});const ye=(0,L.A)(Ce,[["__scopeId","data-v-297a330c"]]);var je=ye;const Ee=e=>((0,o.Qi)("data-v-30bb85a8"),e=e(),(0,o.jt)(),e),_e=Ee((()=>(0,o.Lk)("div",{class:"shine"},null,-1)));var Se=(0,o.pM)({__name:"KanjiContainer",props:{kanji:{},attachedMeaning:{},incorrect:{type:[Boolean,null]}},emits:["dropmeaning"],setup(e,{emit:t}){const n=e,i=s(),l=u();function c(e){if(i.isDragging){if(void 0==i.draggingAttachedCharacter||null==i.draggingMeaning)throw new Error("Trying to drop an undefined or null");l.processDrop({goingToCharacter:n.kanji,comingFromCharacter:i.draggingAttachedCharacter,oldMeaning:n.attachedMeaning,newMeaning:i.draggingMeaning}),i.clearDragging()}}return(e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(["kanji",e.attachedMeaning?"attached":""]),onPointerup:(0,a.D$)(c,["prevent","stop"])},[(0,o.Lk)("div",null,[_e,(0,o.bF)(je,{character:e.kanji,incorrect:e.incorrect},null,8,["character","incorrect"]),(0,o.Lk)("div",{class:(0,r.C4)(["meaning-drop-zone",e.attachedMeaning?"attached":""])},[e.attachedMeaning?((0,o.uX)(),(0,o.Wv)(N,{key:0,meaning:e.attachedMeaning,attachedCharacter:e.kanji},null,8,["meaning","attachedCharacter"])):(0,o.Q3)("",!0)],2)])],34))}});const Ke=(0,L.A)(Se,[["__scopeId","data-v-30bb85a8"]]);var xe=Ke;const Me=e=>((0,o.Qi)("data-v-319682d9"),e=e(),(0,o.jt)(),e),Re={class:"kanji-characters-container"},Ae=Me((()=>(0,o.Lk)("div",{class:"background-layer"},null,-1))),ze=Me((()=>(0,o.Lk)("div",{class:"background-layer-shadow"},null,-1)));var Te=(0,o.pM)({__name:"KanjiCharacterSection",setup(e){const{modelData:t}=u();function n(e,t){g.Ay.fromTo(e,{opacity:0,transform:"translateY(-50px)"},{opacity:1,transform:"translateY(0px)",ease:"power4.out",delay:.1*Number(e.dataset.index),onComplete:t})}function i(e,t){g.Ay.to(e,{opacity:0,transform:"translateY(100px)",ease:"power4.in",onComplete:t})}return(e,r)=>((0,o.uX)(),(0,o.CE)("section",Re,[Ae,ze,(0,o.bF)(ce,{hideBottomLeft:!0}),(0,o.bF)(a.F,{tag:"div",class:"kanji-characters",name:"meaning",onEnter:n,onLeave:i},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,l.R1)(t).characters,((e,t)=>((0,o.uX)(),(0,o.Wv)(xe,{key:e.kanji,"data-index":t,kanji:e.kanji,attachedMeaning:e.attachedMeaning,incorrect:e.incorrect},null,8,["data-index","kanji","attachedMeaning","incorrect"])))),128))])),_:1})]))}});const Ie=(0,L.A)(Te,[["__scopeId","data-v-319682d9"]]);var De=Ie;const Ue=e=>((0,o.Qi)("data-v-84eb943c"),e=e(),(0,o.jt)(),e),Xe={class:"settings-panel-container"},Be={class:"settings-panel"},Pe=Ue((()=>(0,o.Lk)("div",{class:"panel-title"}," 設定 ",-1))),We={class:"option-container"},Fe=Ue((()=>(0,o.Lk)("div",{class:"option-title"}," Answer Checking ",-1))),Ne={class:"option-content"},Oe={class:"group-kanji"},Ve=Ue((()=>(0,o.Lk)("div",{class:"flex-grow"},"Auto-Check",-1))),Ge={class:"group-kanji"},$e=Ue((()=>(0,o.Lk)("div",{class:"flex-grow"},"Auto-Continue",-1))),Qe={class:"option-container"},He=Ue((()=>(0,o.Lk)("div",{class:"option-title"}," Grouping ",-1))),Ye={class:"option-content"},Je={class:"batch-size"},qe=Ue((()=>(0,o.Lk)("div",{class:"flex-grow"},"Number of Groups",-1))),Ze={class:"group-kanji"},et=Ue((()=>(0,o.Lk)("div",{class:"flex-grow"},"Keep Groups Together",-1))),tt={class:"option-container"},nt=Ue((()=>(0,o.Lk)("div",{class:"option-title"},"Level Limits",-1))),at={class:"option-content"},it={class:"level-limit"},ot=["disabled"],rt={class:"level-limit"},lt=Ue((()=>(0,o.Lk)("div",{class:"flex-grow"},"Lower Limit",-1))),ct={class:"level-limit"},st=Ue((()=>(0,o.Lk)("div",{class:"flex-grow"},"Use WaniKani Level",-1))),ut={class:"option-container"},dt=Ue((()=>(0,o.Lk)("div",{class:"option-title"}," WaniKani ",-1))),pt={class:"option-content"},vt={class:"wanikani"},gt=Ue((()=>(0,o.Lk)("div",null,"API Key",-1)));var ht=(0,o.pM)({__name:"SettingsPanel",emits:["settingsUpdated"],setup(e,{emit:t}){const n=t,i=c(),s=(0,o.EW)((()=>i.useWanikaniLevel?"disabled":""));function u(e){if("upper"==e)i.levelLimitUpper>60?i.levelLimitUpper=60:i.levelLimitUpper<1&&(i.levelLimitUpper=1);else if("lower"==e)i.levelLimitLower>60?i.levelLimitLower=60:i.levelLimitLower<1&&(i.levelLimitLower=1);else{if("batch"!=e)throw new Error(`Running checkLimits('${e}'), but no case for ${e}`);i.batchSize>20?i.batchSize=20:i.batchSize<1&&(i.batchSize=1)}}function d(){localStorage.setItem("settingsExist",(!0).toString()),localStorage.setItem("batchSize",i.batchSize.toString()),localStorage.setItem("groupKanji",i.groupKanji.toString()),localStorage.setItem("autoCheck",i.autoCheck.toString()),localStorage.setItem("autoContinue",i.autoContinue.toString()),localStorage.setItem("useWanikaniLevel",i.useWanikaniLevel.toString()),localStorage.setItem("wanikaniAPIKey",i.wanikaniAPIKey),localStorage.setItem("levelLimitUpper",i.levelLimitUpper.toString()),localStorage.setItem("levelLimitLower",i.levelLimitLower.toString()),n("settingsUpdated")}return(0,o.sV)((()=>{if(localStorage.getItem("settingsExist")){let e=localStorage.getItem("batchSize"),t=localStorage.getItem("groupKanji"),n=localStorage.getItem("autoCheck"),a=localStorage.getItem("autoContinue"),o=localStorage.getItem("useWanikaniLevel"),r=localStorage.getItem("wanikaniAPIKey"),l=localStorage.getItem("levelLimitUpper"),c=localStorage.getItem("levelLimitLower");if(!e)throw new Error("Tried to recover batchSize from localStorage but it was undefined");if(!t)throw new Error("Tried to recover groupKanji from localStorage but it was undefined");if(!n)throw new Error("Tried to recover autoCheck from localStorage but it was undefined");if(!a)throw new Error("Tried to recover autoContinue from localStorage but it was undefined");if(!o)throw new Error("Tried to recover useWanikaniLevel from localStorage but it was undefined");if(null==r)throw new Error("Tried to recover wanikaniAPIKey from localStorage but it was null");if(!l)throw new Error("Tried to recover levelLimitUpper from localStorage but it was undefined");if(!c)throw new Error("Tried to recover levelLimitLower from localStorage but it was undefined");i.setBatchSize(Number(e)),i.setGroupKanji("true"===t),i.setAutoCheck("true"===n),i.setAutoContinue("true"===a),i.setUseWanikaniLevel("true"===o),i.setWanikaniAPIKey(r),i.setLevelLimitUpper(Number(l)),i.setLevelLimitLower(Number(c))}})),(e,t)=>((0,o.uX)(),(0,o.CE)("section",null,[(0,o.Lk)("div",Xe,[(0,o.Lk)("div",Be,[Pe,(0,o.Lk)("div",We,[Fe,(0,o.Lk)("div",Ne,[(0,o.Lk)("div",Oe,[Ve,(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.R1)(i).autoCheck=e)},null,512),[[a.lH,(0,l.R1)(i).autoCheck]])]),(0,o.Lk)("div",Ge,[$e,(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>(0,l.R1)(i).autoContinue=e)},null,512),[[a.lH,(0,l.R1)(i).autoContinue]])])])]),(0,o.Lk)("div",Qe,[He,(0,o.Lk)("div",Ye,[(0,o.Lk)("div",Je,[qe,(0,o.bo)((0,o.Lk)("input",{type:"number",onBlur:t[2]||(t[2]=e=>u("batch")),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,l.R1)(i).batchSize=e)},null,544),[[a.Jo,(0,l.R1)(i).batchSize]])]),(0,o.Lk)("div",Ze,[et,(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>(0,l.R1)(i).groupKanji=e)},null,512),[[a.lH,(0,l.R1)(i).groupKanji]])])])]),(0,o.Lk)("div",tt,[nt,(0,o.Lk)("div",at,[(0,o.Lk)("div",it,[(0,o.Lk)("div",{class:(0,r.C4)(["flex-grow",s.value])},"Upper Limit",2),(0,o.bo)((0,o.Lk)("input",{type:"number",onBlur:t[5]||(t[5]=e=>u("upper")),"onUpdate:modelValue":t[6]||(t[6]=e=>(0,l.R1)(i).levelLimitUpper=e),disabled:(0,l.R1)(i).useWanikaniLevel},null,40,ot),[[a.Jo,(0,l.R1)(i).levelLimitUpper]])]),(0,o.Lk)("div",rt,[lt,(0,o.bo)((0,o.Lk)("input",{type:"number",onBlur:t[7]||(t[7]=e=>u("lower")),"onUpdate:modelValue":t[8]||(t[8]=e=>(0,l.R1)(i).levelLimitLower=e)},null,544),[[a.Jo,(0,l.R1)(i).levelLimitLower]])]),(0,o.Lk)("div",ct,[st,(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>(0,l.R1)(i).useWanikaniLevel=e)},null,512),[[a.lH,(0,l.R1)(i).useWanikaniLevel]])])])]),(0,o.Lk)("div",ut,[dt,(0,o.Lk)("div",pt,[(0,o.Lk)("div",vt,[gt,(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[10]||(t[10]=e=>(0,l.R1)(i).wanikaniAPIKey=e),placeholder:"API Key Goes Here"},null,512),[[a.Jo,(0,l.R1)(i).wanikaniAPIKey]])])])]),(0,o.Lk)("div",{class:"save-button-container"},[(0,o.Lk)("button",{class:"save-button",onClick:d}," Save ")])])])]))}});const mt=(0,L.A)(ht,[["__scopeId","data-v-84eb943c"]]);var ft=mt,kt=(0,o.pM)({__name:"AppStage",setup(e){const t=c(),n=s(),a=u(),i=(0,l.KR)(null);a.setCheckAnswers(E);let h=(0,l.KR)(null),m=(0,l.KR)("");(0,l.KR)(null);const f=(0,l.KR)(null),k=(0,l.KR)(""),L=(0,l.KR)(""),b=(0,l.KR)(!0),w=(0,o.EW)((()=>b.value?"showSettings":""));function C(){n.isDragging&&(n.draggingAttachedCharacter&&n.draggingMeaning&&a.processDrop({goingToCharacter:"MEANINGZONE",comingFromCharacter:n.draggingAttachedCharacter,oldMeaning:"MEANINGZONE",newMeaning:n.draggingMeaning}),n.clearDragging())}function y(e){n.setPointerPosition({x:e.x,y:e.y}),n.checkCursor()}function j(){a.readyToGoToNextKanjiBatch?A("ナイス！","Retrieving next kanji set...",!0):_()}function E(){a.modelData.meanings.length<=0&&t.autoCheck&&_()}function _(){let e=!0;a.modelData.characters.forEach((t=>{let n=t.correctMeaning==t.attachedMeaning;n||(e=!1),t.incorrect=!n})),e&&t.autoContinue?(document.querySelectorAll(".kanji").forEach((e=>{e.style.pointerEvents="none"})),setTimeout((()=>{g.Ay.to(".shine",{duration:.2,translateY:"25%",stagger:.05,onComplete:()=>{setTimeout((()=>{A("ナイス！","Retrieving next kanji set...",!0)}),250)}})}),500)):e&&(document.querySelectorAll(".kanji").forEach((e=>{e.style.pointerEvents="none"})),setTimeout((()=>{g.Ay.to(".shine",{duration:.1,translateY:"25%",stagger:.025,onComplete:()=>{S("グッドジョブ！","Looking good!",!0),setTimeout((()=>{a.setReadyToGoToNextKanjiBatch(!0),setTimeout((()=>{x()}),1e3)}),1e3)}})}),250))}function S(e,t,n){if(!e||!t)throw new Error("You must enter popup text");if(!f.value||!f.value.popover)throw new Error("popover ref is null");k.value=e,L.value=t,f.value.popover.style.pointerEvents="initial",f.value.popover.classList.add("show"),n&&f.value.popover.classList.add("animate")}function x(){if(!f.value||!f.value.popover)throw new Error("popover ref is null");f.value.popover.style.pointerEvents="none",f.value.popover.classList.remove("show"),f.value.popover.classList.remove("animate")}function M(){if(!i.value)throw new Error("Tried to access puzzleStage ref but it's null");i.value.style.transition="width 1s cubic-bezier(.75,0,.25,1)",setTimeout((()=>{if(!i.value)throw new Error("Tried to access puzzleStage ref but it's null");i.value.style.transition=""}),1e3),b.value=!b.value}function R(){!h.value&&t.wanikaniAPIKey?(S("ちょい待ちこ","Fetching Wanikani info...",!1),v(t.wanikaniAPIKey).then((e=>{h.value=e.data.level,m.value=e.data.username,M(),A("設定をセーブしたよん！","Retrieving kanji list...",!1)}))):(M(),A("設定をセーブしたよん！","Retrieving kanji list...",!1))}function A(e,n,i){S(e,n,i),a.clearModelData(),setTimeout((()=>{a.setReadyToGoToNextKanjiBatch(!1);let e=t.levelLimitUpper;t.useWanikaniLevel&&h.value&&m&&(e=h.value);let n={type:"KanjiBatchRequest",data:{user_id:m.value,group_count:t.batchSize,max_level:e,min_level:t.levelLimitLower,min_group_size:2}},i=d(n);i.then((e=>{T(e),setTimeout(x,1e3)}))}),1e3)}function T(e){const n=[],i=[];if(t.groupKanji){let t=p(Object.entries(e)),o=new Set,r=[];t.forEach((t=>{let n=parseInt(t[0]);if(!o.has(n)){o.add(n);let a=[],i=t[1];a.push(i),i.visually_similar_subject_ids.forEach((t=>{if(!o.has(t)){if(o.add(t),!e[t])return;a.push(e[t])}})),r.push(...a)}})),r.forEach((e=>{n.push(e.meaning),i.push({kanji:e.character,correctMeaning:e.meaning,attachedMeaning:"",incorrect:null})})),a.setModelData(p(n),i,!0)}else{for(const t of Object.values(e))n.push(t.meaning),i.push({kanji:t.character,correctMeaning:t.meaning,attachedMeaning:"",incorrect:null});a.setModelData(p(n),p(i),!0)}}return(e,t)=>((0,o.uX)(),(0,o.CE)("div",{id:"stage",class:(0,r.C4)(w.value),onPointermove:y,onPointerup:C},[(0,o.bF)(z,{popoverText:k.value,popoverSubtext:L.value,ref_key:"popover",ref:f},null,8,["popoverText","popoverSubtext"]),(0,o.bF)(G),(0,o.bF)(K,{onTogglesettings:M}),(0,o.Lk)("div",{ref_key:"puzzleStage",ref:i,id:"puzzle-stage"},[(0,o.bF)(fe,{onOnSubmit:j}),(0,o.bF)(De),(0,o.bF)(ft,{onSettingsUpdated:R})],512)],34))}});const Lt=(0,L.A)(kt,[["__scopeId","data-v-6fdefb4e"]]);var bt=Lt,wt=(0,o.pM)({__name:"App",setup(e){return(e,t)=>((0,o.uX)(),(0,o.CE)("main",null,[(0,o.bF)(bt)]))}});const Ct=wt;var yt=Ct;const jt=(0,i.Ey)(),Et=(0,a.Ef)(yt);Et.use(jt),Et.mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,o){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],o=e[u][2];for(var l=!0,c=0;c<a.length;c++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(l=!1,o<r&&(r=o));if(l){e.splice(u--,1);var s=i();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,r=a[0],l=a[1],c=a[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(c)var u=c(n)}for(t&&t(a);s<r.length;s++)o=r[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},a=self["webpackChunksimilar_kanji_puzzle"]=self["webpackChunksimilar_kanji_puzzle"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(8259)}));a=n.O(a)})();
//# sourceMappingURL=app.0cacbee9.js.map